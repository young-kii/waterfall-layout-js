!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).WaterfallLayout=e()}(this,(function(){"use strict";function t(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function e(e,n,i){return n&&function(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}return function(){return e((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.columnCount=1,this.containerHeight=0,this.newItems=[],this.columnCount=n.columnCount,this.containerId=e,this.columnGap=n.columnGap,this.rowGap=n.rowGap,this.responsive=n.responsive,this.onUpdate=n.onUpdate,this.items=n.items,this.initContainer(),this.genNewItems()}),[{key:"initContainer",value:function(){var t=this,e=document.getElementById(this.containerId);e&&(this.container=e,this.getItemWidth(),this.responsive&&(this.resizeObserver=new ResizeObserver((function(e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.genNewItems(),t.onUpdate&&t.onUpdate({itemWidth:t.getItemWidth(),containerWidth:o.contentRect.width,containerHeight:t.containerHeight,newItems:t.newItems})}}catch(t){r.e(t)}finally{r.f()}})),this.resizeObserver.observe(e)))}},{key:"genNewItems",value:function(){for(var t=new Array(this.columnCount).fill(0).map((function(){return[]})),e=new Array(this.columnCount).fill(0),i=0;i<this.items.length&&this.itemWidth;){var r=this.items[i].height*this.itemWidth/this.items[i].width,o=Math.min.apply(Math,n(e)),a=e.indexOf(o),s={width:this.itemWidth,height:r,x:this.itemWidth*a+this.columnGap*a,y:o,id:this.items[i].id};t[a].push(s),e[a]+=s.height+this.rowGap,i++}this.newItems=t,this.containerHeight=Math.max.apply(Math,n(e))}},{key:"getItemWidth",value:function(){return this.container&&(this.itemWidth=(this.container.clientWidth-(this.columnCount-1)*this.columnGap)/this.columnCount),this.itemWidth||0}},{key:"getNewItems",value:function(){return this.newItems}},{key:"getContainerHeight",value:function(){return this.containerHeight}},{key:"unobserve",value:function(){this.resizeObserver&&this.container&&this.resizeObserver.unobserve(this.container)}}])}()})),window.WATERFALL_LAYOUT_BUILD_TIME="5/16/2024, 10:05:37 PM";
